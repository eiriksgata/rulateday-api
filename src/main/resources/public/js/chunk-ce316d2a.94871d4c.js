(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ce316d2a"],{3967:function(t,e,n){},4617:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[t.isLogin?t._e():n("div",[n("v-card",[n("v-card-subtitle",[t._v("检测到当前没有绑定数据，请先输入ID")]),n("v-card-text",[n("v-text-field",{attrs:{label:"ID编码",placeholder:"回车跳转"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login()}},model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}})],1)],1)],1),t.isLogin?n("div",[n("v-card",[n("v-card-title",{staticClass:"indigo white--text text-h6"},[t._v(" 剧情框 "),n("v-row",{attrs:{align:"center",justify:"end"}},[n("span",{staticClass:"subheading mr-2"},[t._v("玩家ID: "+t._s(t.userId)+" ")]),n("span",{staticClass:"subheading mr-2"},[t._v("事件ID: "+t._s(t.currentEventId))])])],1),n("v-textarea",{attrs:{filled:"","auto-grow":"",readonly:"","hide-details":"","background-color":"white"},model:{value:t.textContent,callback:function(e){t.textContent=e},expression:"textContent"}}),n("div",t._l(t.itemButtonList,(function(e){return n("v-btn",{key:e.id,staticClass:"itemButtonBox",on:{click:function(n){t.queryItemEvent(e.eventId),t.queryItemContent(e.eventId)}}},[t._v(" ["+t._s(e.eventId)+"] "+t._s(e.title)+" ")])})),1)],1),n("v-text-field",{attrs:{label:"跳转到事件ID页",placeholder:"回车跳转"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.jumpEvent()}},model:{value:t.jumpEventId,callback:function(e){t.jumpEventId=e},expression:"jumpEventId"}}),n("v-card",[n("v-card-text",[n("v-text-field",{attrs:{label:"标题",required:""},model:{value:t.eventForm.title,callback:function(e){t.$set(t.eventForm,"title",e)},expression:"eventForm.title"}}),n("v-textarea",{attrs:{label:"内容",rows:4,required:""},model:{value:t.eventForm.content,callback:function(e){t.$set(t.eventForm,"content",e)},expression:"eventForm.content"}}),n("v-btn",{staticClass:"itemButtonBox",attrs:{color:"info","min-width":"150"},on:{click:function(e){return t.submitEvent()}}},[t._v(" 为该事件添加一个选项 ")]),n("v-btn",{staticClass:"itemButtonBox",attrs:{color:"error","min-width":"150"},on:{click:function(e){return t.deleteEventNode()}}},[t._v(" 删除当前事件 ")]),n("v-subheader",[t._v("注意：如果已经构建成一个环，请使用下方的删除事件")])],1)],1),n("v-card",[n("v-card-title",[t._v("[增加/移除]连线")]),n("v-card-text",[n("v-text-field",{attrs:{label:"事件ID",required:""},model:{value:t.nextEventId,callback:function(e){t.nextEventId=e},expression:"nextEventId"}}),n("v-btn",{staticClass:"itemButtonBox",attrs:{color:"info","min-width":"150"},on:{click:function(e){return t.addEventRel()}}},[t._v(" 增加 ")]),n("v-btn",{staticClass:"itemButtonBox",attrs:{color:"info","min-width":"150"},on:{click:function(e){return t.deleteEventRel()}}},[t._v(" 删除 ")])],1)],1)],1):t._e()])},a=[],r=n("9ab4"),d=n("2b0e"),i=n("2fe1"),c=n("1b40"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.textContent="",e.itemButtonList=[],e.currentEventId=1,e.jumpEventId=1,e.nextEventId="",e.userId="",e.isLogin=!1,e.eventForm={content:"",previousEventId:0,title:"",firstNode:!1},e}return Object(r["b"])(e,t),e.prototype.mounted=function(){this.loginCheck(),this.loadEventId()},e.prototype.queryAllFirstNode=function(){var t=this;t.$axios({url:"/api/v1/game/event/node/first",method:"get"}).then((function(e){0===e.data.code?(t.textContent=e.data.data[0].content,t.currentEventId=e.data.data[0].eventId,t.queryItemEvent(e.data.data[0].eventId)):t.$toast.error(e.data.message)})).catch((function(e){t.$toast.error(e)}))},e.prototype.queryItemEvent=function(t){var e=this;e.$axios({url:"/api/v1/game/event/node/next",method:"post",data:{id:t}}).then((function(t){0===t.data.code?e.itemButtonList=t.data.data:e.$toast.error(t.data.message)})).catch((function(t){e.$toast.error(t)}))},e.prototype.queryItemContent=function(t){var e=this;e.$axios({url:"/api/v1/game/event/node/info",method:"post",data:{eventId:t}}).then((function(t){0===t.data.code?(e.textContent=t.data.data.content,e.currentEventId=t.data.data.eventId):(e.$toast.error(t.data.message),e.jumpEventId=1,e.jumpEvent())})).catch((function(t){e.$toast.error(t)}))},e.prototype.jumpEvent=function(){this.queryItemEvent(this.jumpEventId),this.queryItemContent(this.jumpEventId),this.currentEventId=this.jumpEventId},e.prototype.submitEvent=function(){var t=this;t.eventForm.previousEventId=t.currentEventId,t.$axios({url:"/api/v1/game/event/node",method:"post",data:t.eventForm}).then((function(e){0===e.data.code?(t.jumpEventId=t.currentEventId,t.jumpEvent()):t.$toast.error(e.data.message)})).catch((function(e){t.$toast.error(e)}))},e.prototype.deleteEventNode=function(){var t=this;t.$axios({url:"/api/v1/game/event/node",method:"delete",data:{id:this.currentEventId}}).then((function(e){0===e.data.code?(t.jumpEventId=t.currentEventId-1,t.jumpEvent()):t.$toast.error(e.data.message)})).catch((function(e){t.$toast.error(e)}))},e.prototype.addEventRel=function(){var t=this;t.$axios({url:"/api/v1/game/event/node/rel",method:"post",data:{eventId:this.currentEventId,nextEventId:this.nextEventId}}).then((function(e){0===e.data.code?(t.jumpEventId=t.currentEventId-1,t.jumpEvent()):t.$toast.error(e.data.message)})).catch((function(e){t.$toast.error(e)}))},e.prototype.deleteEventRel=function(){var t=this;t.$axios({url:"/api/v1/game/event/node/rel",method:"delete",data:{eventId:this.currentEventId,nextEventId:this.nextEventId}}).then((function(e){0===e.data.code?(t.jumpEventId=t.currentEventId-1,t.jumpEvent()):t.$toast.error(e.data.message)})).catch((function(e){t.$toast.error(e)}))},e.prototype.loginCheck=function(){var t=localStorage.getItem("id");this.userId=null==t||void 0==t?"":t,this.isLogin=!(null==t||void 0==t)},e.prototype.login=function(){localStorage.setItem("id",this.userId),this.loginCheck()},e.prototype.changeEventId=function(t){localStorage.setItem("currentEventId",t+"")},e.prototype.loadEventId=function(){var t=localStorage.getItem("currentEventId");null==t||void 0==t?(this.jumpEventId=1,this.currentEventId=1):(this.jumpEventId=parseInt(t),this.currentEventId=parseInt(t)),this.jumpEvent()},Object(r["a"])([Object(c["d"])("currentEventId")],e.prototype,"changeEventId",null),e=Object(r["a"])([Object(i["b"])({components:{}})],e),e}(d["default"]),u=s,v=u,l=v,m=(n("6f12"),n("2877")),p=n("6544"),I=n.n(p),h=n("8336"),f=n("b0af"),E=n("99d9"),x=n("a523"),b=n("0fd9"),g=n("e0c7"),y=n("8654"),j=n("a844"),k=Object(m["a"])(l,o,a,!1,null,"1ebbb782",null);e["default"]=k.exports;I()(k,{VBtn:h["a"],VCard:f["a"],VCardSubtitle:E["c"],VCardText:E["d"],VCardTitle:E["e"],VContainer:x["a"],VRow:b["a"],VSubheader:g["a"],VTextField:y["a"],VTextarea:j["a"]})},"6f12":function(t,e,n){"use strict";n("3967")}}]);
//# sourceMappingURL=chunk-ce316d2a.94871d4c.js.map